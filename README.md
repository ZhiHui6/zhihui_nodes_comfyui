# 🎨 zhihui-nodes-comfyui 自定义节点集
## 📖 项目介绍

这是一个由**潪绘·Binity**所创建的ComfyUI自定义节点工具合集项目，旨在为用户提供一系列实用、高效的节点，以增强和扩展ComfyUI的功能。

## 🚀 安装方式
### 通过 ComfyUI Manager 安装（推荐）

1.  安装 [ComfyUI Manager](https://github.com/ltdrdata/ComfyUI-Manager)。
2.  在 Manager 菜单中选择 “Install Custom Nodes”。
3.  搜索 `zhihui-nodes-comfyui` 或通过 Git URL `https://github.com/ZhiHui6/zhihui-nodes-comfyui.git` 进行安装。
4.  点击 “Install” 按钮并等待安装完成。
5.  重启 ComfyUI，即可在节点菜单中找到新添加的节点。

### 手动安装

1.  下载本仓库的ZIP文件或通过 `git clone` 克隆。
2.  将整个 `zhihui-nodes-comfyui` 文件夹解压或复制到 ComfyUI 的 `custom_nodes` 目录下。
3.  重启 ComfyUI。

---

## 🛠️ 节点功能说明

### 📝 文本处理类节点

#### 1. 多行文本 (`MultiLineTextNode`)
- **功能**: 提供一个支持多行输入的文本框，并带有语法高亮和注释功能，支持变量替换。

#### 2. 文本组合 (`TextCombinerNode`)
- **功能**: 合并两个文本输入，并可通过独立的开关控制每个文本的输出。

#### 3. 文本修改器 (`TextModifier`)
- **功能**: 根据指定的起始和结束标记提取文本内容，并自动去除多余的空白字符。

#### 4. 文本提取器 (`TextExtractor`)
- **功能**: 从混合文本中提取纯中文或纯英文字符，支持标点和数字的提取，并自动清理格式。

#### 5. 文本切换器 (`TextSwitch`)
- **功能**: 在两个文本输入之间进行切换，可通过下拉菜单选择输出，并支持添加注释。

### 💡 提示词处理类节点

#### 6. 摄影提示词生成器 (`PhotographPromptGenerator`)
- **功能**: 根据预设的摄影要素（如相机、镜头、光照、场景等）组合生成专业的摄影风格提示词。
- **特点**: 
    - 支持从自定义文本文件加载选项，灵活扩展。
    - 支持随机选择，增加创意多样性。
    - 输出模板可自定义。
- **适用场景**: 产品摄影、人像摄影、场景构建。

#### 7. 提示词优化器 (`PromptOptimizer`)
- **功能**: 在线智能扩写和优化用户输入的提示词，无需本地硬件支持。
- **模式**: 提供标准、详细和自定义三种扩写模式。
- **语言**: 支持中英文双语输出。

#### 8. 提示词预设 - 单选 (`PromptPresetOneChoice`)
- **功能**: 提供6个预设选项，用户可以方便地在不同预设之间切换。

#### 9. 提示词预设 - 多选 (`PromptPresetMultipleChoice`)
- **功能**: 支持同时选择多个预设，并将它们合并输出，每个预设都带有独立的开关和注释功能。

#### 10. 触发词合并器 (`TriggerWordMerger`)
- **功能**: 将特定的触发词（Trigger Words）与主文本智能合并，并支持权重控制（例如 `(word:1.5)`）。

#### 11. 系统引导词加载器 (`SystemPromptLoader`)
- **功能**: 从预设文件夹动态加载系统级引导词（System Prompt），并可选择性地与用户输入合并。

#### 12. Kontext预设增强版 (`KontextPresetsPlus`)
- **功能**: 提供多项专业的图像变换预设，内置免费在线扩写功能，为图像编辑提供创意指导。
- **特点**:
    - **丰富预设库**: 包含情境深度融合、无痕融合、场景传送、移动镜头等20余项专业预设。
    - **AI智能扩写**: 支持多种LLM模型（OpenAI、Mistral、Qwen等）对预设内容进行创意扩写。
    - **温度控制**: 可调节创意温度（0.0-2.0），控制AI生成内容的创造性程度。
    - **双重输入**: 支持输出原始预设内容或输出扩写后的内容。

### 🖼️ 图像处理类节点

#### 13. 图像缩放器 (`ImageScaler`)
- **功能**: 提供多种插值算法对图像进行缩放，并可选择保持原始宽高比。

#### 14. 图像切换器 (`ImageSwitch`)
- **功能**: 支持在2个或4个图像输入之间进行切换，通过下拉菜单选择输出。

#### 15. 自动图像检测器 (`AutoImageSwitch`)
- **功能**: 自动检测多个输入端口中哪一个有图像输入，并将其无缝输出到下游节点。
- **注意**: 仅支持单端口有图像输入的场景，多端口同时输入会报错。

### ⚙️ 逻辑与工具类节点

#### 16. 额外选项列表 (`ExtraOptions`)
- **功能**: 一个通用的额外选项列表，类似于 JoyCaption 的设计，设有总开关和独立的引导词输入框。

#### 17. 百度翻译 (`BaiduTranslateNode`)
- **功能**: 提供在线翻译服务，支持中英文互译和源语言自动检测。
- **密钥加载**: 
    - **明文加载**: 直接在节点中输入 `APP_ID` 和 `API_KEY`。
    - **后台加载**: 从配置文件读取密钥，保护隐私安全。
- **注意**: 
    - 需在[百度翻译开放平台](https://api.fanyi.baidu.com/)注册并获取密钥。
    - 使用此节点需要网络连接。

#### 18. 颜色移除 (`ColorRemoval`)
- **功能**: 从图像中移除彩色，输出灰度图像。

---

## 📜 LICENSE

This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.